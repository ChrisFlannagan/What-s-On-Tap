function saveBulkImported(e,t){!function(a){a.ajax({url:form_handler.ajax_url,type:"post",data:{action:"input_bulkimport",ajax_bulkimport:!0,nonce:t,tap:a("#newtap"+e).val(),brewery:a("#newtap_brewery"+e).val(),abv:a("#newtap_abv"+e).val()},success:function(t){if("0"==t)console.log("failed");else{var s=0,n=a("#newtap"+e).closest(".importitem");a("[data-js-suggest-result]").length&&(s=a("[data-js-suggest-result]").length);var l='<li data-cnt="'+s+'" onclick="" class="menuitem ui-sortable-handle" data-id="'+t+'" data-js-suggest-result> '+a("#newtap"+e).val()+' <span class="meta">'+a("#newtap_brewery"+e).val()+'</span> <span class="remove" onclick="remSuggested(this);">Remove</span></li>';a("[data-js-list-sortable]").append(l),a("[data-js-input-found]").val(a("[data-js-input-found]").val()+t+";"),n.remove()}}})}(jQuery)}function addSuggested(e){jQuery("[data-js-list-sortable]").append(e),jQuery("[data-js-list-suggest]").remove(),jQuery("[data-js-input-ajaxfinder]").val(""),jQuery("[data-js-input-found]").val(jQuery("[data-js-input-found]").val()+jQuery(e).data("id")+";"),jQuery("[data-js-suggest-result]").removeClass("result"),jQuery("[data-js-suggest-result]").removeClass("-selected"),jQuery("[data-js-suggest-result]").addClass("menuitem"),jQuery("[data-js-suggest-result]").attr("onclick","")}function remSuggested(e){var t="";jQuery(e).parent().remove(),jQuery("[data-js-input-found]").val(""),jQuery("[data-js-list-sortable] li").each(function(){t+=jQuery(this).data("id")+";"}),jQuery("[data-js-input-found]").val(t)}!function(e){var t;e(document).ready(function(){t=e("[data-js-bulkimport-btn]");var a=e("[data-js-bulkimport-textarea]");t.length&&a.length&&t.click(function(s){for(var n=a.val().split("\n"),l="",u=0;u<n.length;u++)l+='<p class="importitem"><input type="text" id="newtap'+u+'" value="'+n[u]+'" /> ',l+='<input type="text" id="newtap_brewery'+u+'" placeholder="Brewery" /> ',l+='<input type="text" size="3" id="newtap_abv'+u+'" placeholder="ABV" />% ',l+='<input type="button" value="Save" onclick="saveBulkImported('+u+", '"+t.data("nonce")+"');\" /></p>";l+='<p class="saveall"><input type="button" value="Save All" onclick="saveBulkImported(0);" /></p>',a.replaceWith(e(l))})})}(jQuery),function(e){var t=e("[data-js-input-ajaxfinder]");t.length&&(t.keydown(function(e){13===e.which&&e.preventDefault()}),t.keyup(function(t){t.preventDefault(),t.stopPropagation();var a=String.fromCharCode(t.keyCode),s=e(t.target);if(s.val().length>1&&/[a-zA-Z0-9-_ ]/.test(a)){var n=e(s).data("find");e.ajax({url:form_handler.ajax_url,type:"post",data:{action:"input_ajaxfinder",ajax_finder:!0,nonce:n[0],find:n[1],field:n[2],meta:n[3],val:s.val()},success:function(t){for(var a=JSON.parse(t),n='<div class="'+form_handler.js_namespace+'" data-js-list-suggest><ul class="list-suggest">',l=0;l<a.length;l++){var u=a[l],d="result";0==l&&(d+=" -selected"),n+='<li data-cnt="'+l+'" onclick="addSuggested(this);" class="'+d+'" data-id="'+u.id+'" data-js-suggest-result> '+u.title+' <span class="meta">'+u.meta+'</span> <span class="remove" onclick="remSuggested(this);">Remove</span></li>'}n+="</ul></div>";var r=e("[data-js-list-suggest]");r.length&&r.remove(),e("body").append(n),r=e("[data-js-list-suggest]");var i=s.offset();r.css({left:i.left+"px",top:i.top+s.outerHeight()+"px",width:s.outerWidth()+"px",position:"absolute"})}})}var l=e("[data-js-list-suggest]"),u=l.find(".-selected"),d=l.find("[data-js-suggest-result]"),r=d.length,i=Number(u.data("cnt"));if(38==t.which&&0!=i)u.removeClass("-selected"),l.find(".result[data-cnt='"+Number(i-1)+"']").addClass("-selected");else if(40==t.which&&i<r-1)u.removeClass("-selected"),console.log(Number(i+1)),l.find(".result[data-cnt='"+Number(i+1)+"']").addClass("-selected");else if(13==t.which)return addSuggested(u),!1}))}(jQuery),function(e){e(document).ready(function(){var t=e("[data-js-list-sortable]");t.length&&t.sortable({update:function(t,a){e("[data-js-input-found]").val(""),e("[data-js-suggest-result]").each(function(){e("[data-js-input-found]").val(e("[data-js-input-found]").val()+e(this).data("id")+";")})}})})}(jQuery);